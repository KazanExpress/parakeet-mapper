{"version":3,"file":"parakeet-mapper.umd.js","sources":["../src/index.ts"],"sourcesContent":["export function mapFactory<\n  I extends object,\n  O extends object\n>(FieldMap: TypeMap<I, O>): (input: I) => O {\n  return function (input: I) {\n    if (\n      !FieldMap ||\n      Array.isArray(FieldMap) ||\n      !Object.keys(FieldMap).length\n    ) {\n      return {} as O;\n    }\n\n    const result: Partial<O> = {};\n    for (const key in FieldMap) {\n      if (typeof FieldMap[key] === 'boolean' && FieldMap[key]) {\n        result[key] = input[key as string] as any;\n        continue;\n      }\n\n      if (typeof FieldMap[key] === 'string') {\n        result[key] = input[FieldMap[key as string]] as any;\n        continue;\n      }\n\n      if (typeof FieldMap[key] === 'function') {\n        let mapperValue = (FieldMap[key] as Function)(input);\n        result[key] = mapperValue;\n        continue;\n      }\n    }\n\n    return result as O;\n  };\n}\n\nexport function mapTypes<\n  I extends object,\n  O extends object,\n>(input: I, FieldMap: TypeMap<I, O>): O {\n  return mapFactory(FieldMap)(input);\n}\n\nexport type TypeMap<\n  I extends object = any,\n  O extends object = any\n> = {\n  /**\n   * if has function - map by funciton\n   * if true - map straight without changes\n   * if false - do not map\n   */\n    [key in keyof Partial<O>]: boolean | keyof Partial<I> | ((obj: I) => O[key]);\n};\n"],"names":[],"mappings":";;;;;;WAAgB,UAAU,CAGxB,QAAuB;MACvB,OAAO,UAAU,KAAQ;UACvB,IACE,CAAC,QAAQ;cACT,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC;cACvB,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,EAC7B;cACA,OAAO,EAAO,CAAC;WAChB;UAED,IAAM,MAAM,GAAe,EAAE,CAAC;UAC9B,KAAK,IAAM,GAAG,IAAI,QAAQ,EAAE;cAC1B,IAAI,OAAO,QAAQ,CAAC,GAAG,CAAC,KAAK,SAAS,IAAI,QAAQ,CAAC,GAAG,CAAC,EAAE;kBACvD,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAa,CAAQ,CAAC;kBAC1C,SAAS;eACV;cAED,IAAI,OAAO,QAAQ,CAAC,GAAG,CAAC,KAAK,QAAQ,EAAE;kBACrC,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,GAAa,CAAC,CAAQ,CAAC;kBACpD,SAAS;eACV;cAED,IAAI,OAAO,QAAQ,CAAC,GAAG,CAAC,KAAK,UAAU,EAAE;kBACvC,IAAI,WAAW,GAAI,QAAQ,CAAC,GAAG,CAAc,CAAC,KAAK,CAAC,CAAC;kBACrD,MAAM,CAAC,GAAG,CAAC,GAAG,WAAW,CAAC;kBAC1B,SAAS;eACV;WACF;UAED,OAAO,MAAW,CAAC;OACpB,CAAC;EACJ,CAAC;AAED,WAAgB,QAAQ,CAGtB,KAAQ,EAAE,QAAuB;MACjC,OAAO,UAAU,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC;EACrC,CAAC;;;;;;;;;;;;;"}